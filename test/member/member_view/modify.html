<!--이름 아이디 세션으로 가져오기-->


<div id="container" class="container-full">
	<div id="content" class="content">
		<div class="inner">
			<div class="tit-box-h3">
				<h3 class="tit-h3">내정보수정</h3>
				<div class="sub-depth">
					<span><i class="icon-home"><span>홈</span></i></span>
					<strong>내정보수정</strong>
				</div>
			</div>

			<div class="section-content">
				<table border="0" cellpadding="0" cellspacing="0" class="tbl-col-join">
					<caption class="hidden">강의정보</caption>
					<colgroup>
						<col style="width:15%"/>
						<col style="*"/>
					</colgroup>

					<tbody>
						<tr>
							<th scope="col"><span class="icons">*</span>이름</th>
							<td><input type="text" name = 'name' value="<?php echo $_SESSION['name']?>"  class="input-text" style="width:302px" readonly /></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>아이디</th>
							<td><input type="text" name = 'id' value="<?php echo $_SESSION['id']?>"  class="input-text" style="width:302px" readonly /></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>비밀번호</th>
							<td><input type="password" class="input-text" name ="pw1" style="width:302px" placeholder="8-15자의 영문자/숫자 혼합"/></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>비밀번호 확인</th>
							<td><input type="password" class="input-text" name ="pw2" style="width:302px"/></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>이메일주소</th>
							<td>
								<input type="text" class="input-text" name ="email" style="width:138px"/> @ 
								<input type="text" class="input-text" name ="email_host" style="width:138px"/>
								<select class="input-sel" style="width:160px">
									<option value="">선택입력</option>
									<option value="">선택입력</option>
									<option value="">선택입력</option>
									<option value="">선택입력</option>
									<option value="">선택입력</option>
								</select>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>휴대폰 번호</th>
							<td>
								<input type="text" class="input-text" style="width:88px" name ="mobile1"/> - 
								<input type="text" class="input-text" style="width:88px" name ="mobile2" /> - 
								<input type="text" class="input-text" style="width:88px" name ="mobile3" />
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons"></span>일반전화 번호</th>
							<td>
								<input type="text" class="input-text" style="width:88px" name ="phone1"/> - 
								<input type="text" class="input-text" style="width:88px" name ="phone2" /> - 
								<input type="text" class="input-text" style="width:88px" name ="phone3" />
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>주소</th>
							<td>
								<p >
									<label>우편번호 <input type="text" id ="post_code" class="input-text ml5" style="width:242px" name="post_num" disabled /></label><a href="#" class="btn-s-tin ml10" id="address_finder">주소찾기</a>
								</p>
								<p class="mt10">
									<label>기본주소 <input type="text" id ="address_1" class="input-text ml5" style="width:719px" name="address" /></label>
								</p>
								<p class="mt10">
									<label>상세주소 <input type="text"id ="address_2" class="input-text ml5" style="width:719px" name="address_detail" /></label>
								</p>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>SMS수신</th>
							<td>
								<div class="box-input">
									<label class="input-sp">
										<input type="radio" name="sms_ok" id="" checked="checked" value="Y"/>
										<span class="input-txt">수신함</span>
									</label>
									<label class="input-sp">
										<input type="radio" name="sms_no" id="" />
										<span class="input-txt">미수신</span>
									</label>
								</div>
								<p>SMS수신 시, 해커스의 혜택 및 이벤트 정보를 받아보실 수 있습니다.</p>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>메일수신</th>
							<td>
								<div class="box-input">
									<label class="input-sp">
										<input type="radio" name="mail_ok" id="" checked="checked" value="Y"/>
										<span class="input-txt">수신함</span>
									</label>
									<label class="input-sp">
										<input type="radio" name="mail_no" id="" />
										<span class="input-txt">미수신</span>
									</label>
								</div>
								<p>메일수신 시, 해커스의 혜택 및 이벤트 정보를 받아보실 수 있습니다.</p>
							</td>
						</tr>
					</tbody>
				</table>

				<div class="box-btn">
					<a href="#" class="btn-l" id="modify">정보수정</a>
				</div>
			</div>
		</div>
	</div>
</div>


<!--아이디 유효성 검사 -->
<script>
$('#modify').click(function(){	
	$.ajax({
		type: "POST",
		url: "./member_process/modify_check.php",
		data: {
			"name" : $("input[name|='name']").val(),
			 "id" : $("input[name|='id']").val(),
			 "pw1" : $("input[name|='pw1']").val(),
			 "pw2" : $("input[name|='pw2']").val(),
			 "email" : $("input[name|='email']").val(),
			 "email_host" : $("input[name|='email_host']").val(),
			 "mobile1" : $("input[name|='mobile1']").val(),
			 "mobile2" : $("input[name|='mobile2']").val(),
			 "mobile3" : $("input[name|='mobile3']").val(),
			 "phone1" : $("input[name|='phone1']").val(),
			 "phone2" : $("input[name|='phone2']").val(),
			 "phone3" : $("input[name|='phone3']").val(),
			 "post_num" : $("input[name|='post_num']").val(),
			 "address" : $("input[name|='address']").val(),
			 "address_detail" : $("input[name|='address_detail']").val(),
			 "sms_ok" : $("input[name|='sms_ok']").val(),	 
			 "mail_ok" : $("input[name|='mail_ok']").val()
		},
		dataType: 'html',
		success: function(data) {
				if(data == 1){
					alert("변경에 성공하였습니다");
					$(location).attr('href', '../index.php');
				}else{
					alert(data);
				}
					
			}
	});
});

</script>


<!--sms / mail 스왑-->
<script>
$(document).ready(function(){
	$("input[name|='sms_ok']").click(function(){	 
        $("input[name|='sms_no']").prop("checked",false); 
		$("input[name|='sms_ok']").prop("value",'Y');
    });
	$("input[name|='sms_no']").click(function(){	 
        $("input[name|='sms_ok']").prop("checked",false); 
		$("input[name|='sms_ok']").prop("value",'N');
    });
	$("input[name|='mail_ok']").click(function(){	 
        $("input[name|='mail_no']").prop("checked",false); 
		$("input[name|='mail_ok']").prop("value",'Y');
    });
	$("input[name|='mail_no']").click(function(){	 
        $("input[name|='mail_ok']").prop("checked",false); 
		$("input[name|='mail_ok']").prop("value",'N');
    });
});
</script>


<!--다음 api-->
<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
<script>
		$('#address_finder').click(function () {
			execDaumPostcode();
		});

</script>

<script>

	function execDaumPostcode(){
		new daum.Postcode({
			oncomplete: function(data){
				$("#post_code").val(data.postcode);
				$("#address_1").val(data.address);
			
			}
		}).open();
	}
</script>